(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86dcf204"],{1057:function(e,t,a){"use strict";a("2f0f")},"13a9":function(e,t,a){"use strict";a.d(t,"m",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return p})),a.d(t,"r",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"a",(function(){return f})),a.d(t,"g",(function(){return m})),a.d(t,"p",(function(){return h})),a.d(t,"n",(function(){return b})),a.d(t,"o",(function(){return g})),a.d(t,"b",(function(){return w})),a.d(t,"q",(function(){return v})),a.d(t,"c",(function(){return y})),a.d(t,"j",(function(){return A})),a.d(t,"k",(function(){return O})),a.d(t,"l",(function(){return I})),a.d(t,"f",(function(){return k}));var n=a("5530"),o=(a("99af"),a("b775")),i=a("e686"),r=a.n(i);function l(e,t,a){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/Inerface/page/").concat(e,"/").concat(t),method:"post",params:Object(n["a"])({},a)})}function s(e,t,a){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/pageToApply"),method:"post",params:Object(n["a"])({pageNo:e,pageSize:t},a)})}function c(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/updateApi"),method:"post",data:e})}function p(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/delApiApply/").concat(e),method:"delete"})}function u(e,t){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/manualState/").concat(e,"/").concat(t),method:"post"})}function d(){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/getAssociativeApi"),method:"get"})}function f(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/api/saveApi"),method:"post",data:e})}function m(){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/scene/findAllScene"),method:"get"})}function h(e,t,a){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/alarmLog/findAllAlarmInterfacePage"),method:"post",params:Object(n["a"])({pageNo:e,pageSize:t},a)})}function b(){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/alarmLog/findAlarmInterfacePage"),method:"post"})}function g(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/alarmLog/findAlarmLogByide"),method:"post",params:{id:e}})}function w(e,t){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/alarmLog/updateAlarmInterface/").concat(e,"/").concat(t),method:"put"})}function v(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/Inerface/updateInterface"),method:"put",params:e})}function y(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/supplier/delectInterface/").concat(e),method:"delete"})}function A(e,t){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/Inerface/page/").concat(e,"/").concat(t),method:"post"})}function O(e,t){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/Inerface/findInterfaceTimeCountCall"),method:"post",params:e,data:t})}function I(e){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/Inerface/queryAverageDayTrafficById/").concat(e),method:"post"})}function k(){return Object(o["a"])({url:"".concat(r.a.ProxyUrl,"/alarmLog/findAlarmCount"),method:"get"})}},1915:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"外部数据接口",name:"first"}},[a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"API名称:"}},[a("el-input",{attrs:{placeholder:"请输入API名称"},model:{value:e.formInline.interfaceName,callback:function(t){e.$set(e.formInline,"interfaceName",t)},expression:"formInline.interfaceName"}})],1),a("el-form-item",[a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"未启用",value:"0"}}),a("el-option",{attrs:{label:"已启用",value:"1"}}),a("el-option",{attrs:{label:"已停用",value:"2"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)],1),a("div",{staticClass:"datalist"},[a("el-table",{ref:"multipleTable",attrs:{fit:"","row-class-name":e.tableRowClassName,data:e.outTableData,"tooltip-effect":"dark",border:"","cell-style":e.cellStyle},on:{"row-click":e.gotoOutDetail}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),a("el-table-column",{attrs:{prop:"serviceId",width:"50",label:"API ID"}}),a("el-table-column",{attrs:{prop:"interfaceName",label:"API 名称","min-width":"100"}}),a("el-table-column",{attrs:{prop:"categoryResource",label:"所属场景",width:"70"}}),a("el-table-column",{attrs:{prop:"interfaceAddress",label:"接口地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.interfaceAddress,callback:function(a){e.$set(t.row,"interfaceAddress",a)},expression:"scope.row.interfaceAddress"}})],1):a("span",[e._v(e._s(t.row.interfaceAddress))])]}}])}),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商"}}),a("el-table-column",{attrs:{prop:"endtime",label:"有效期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.endtime))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.state,callback:function(a){e.$set(t.row,"state",a)},expression:"scope.row.state"}},e._l(e.optionsStateOut,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):a("span",[e._v(e._s(t.row.state))])]}}])}),a("el-table-column",{attrs:{prop:"interfaceType",label:"接口类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.interfaceType,callback:function(a){e.$set(t.row,"interfaceType",a)},expression:"scope.row.interfaceType"}})],1):a("span",[e._v(e._s(t.row.interfaceType))])]}}])}),a("el-table-column",{attrs:{id:"operate",label:"操作",width:"230px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{id:"edit",icon:"el-icon-edit"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleEditOut(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{id:"edit",type:"primary",icon:"el-icon-circle-check"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleSaveOut(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"启用",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show&&"已停用"==t.row.state,expression:"!scope.row.show &&scope.row.state == '已停用' ? true : false"}],attrs:{icon:"el-icon-video-play"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleStartOut(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show&&"已启用"==t.row.state,expression:"!scope.row.show &&scope.row.state == '已启用' ? true : false"}],attrs:{icon:"el-icon-video-pause"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleStopOut(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{icon:"el-icon-close"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleCancelOut(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{icon:"el-icon-document-copy"},nativeOn:{click:function(a){return a.stopPropagation(),e.copyLink(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{type:"danger",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleDeleteOut(t.$index,t.row)}}})],1)]}}])})],1)],1),a("paginationOut",{attrs:{total:e.totalOut},on:{pageSizeHandle:e.handleSizeChange,currentPageHandle:e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"应用接口",name:"second"}},[a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInlineIn}},[a("el-form-item",{attrs:{label:"API名称:"}},[a("el-input",{attrs:{placeholder:"请输入API名称"},model:{value:e.formInlineIn.apiName,callback:function(t){e.$set(e.formInlineIn,"apiName",t)},expression:"formInlineIn.apiName"}})],1),a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInlineIn.apiState,callback:function(t){e.$set(e.formInlineIn,"apiState",t)},expression:"formInlineIn.apiState"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已启用",value:"1"}}),a("el-option",{attrs:{label:"已停用",value:"0"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitIn}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增")])],1)],1)],1),a("el-dialog",{attrs:{title:"新增接口",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"apiApply",attrs:{id:"addApp",model:e.apiApply,"status-icon":"",rules:e.rules}},[a("el-form-item",{attrs:{label:"所属场景：","label-width":e.formLabelWidth,prop:"sceneId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{"~focus":function(t){return e.getScene(t)}},model:{value:e.apiApply.sceneId,callback:function(t){e.$set(e.apiApply,"sceneId",t)},expression:"apiApply.sceneId"}},e._l(e.sceneName,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"关联外部接口：","label-width":e.formLabelWidth,prop:"supplierName"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{"~focus":function(t){return e.getapi(t)}},model:{value:e.apiApply.supplierName,callback:function(t){e.$set(e.apiApply,"supplierName",t)},expression:"apiApply.supplierName"}},e._l(e.allApis,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"API 名称：","label-width":e.formLabelWidth,prop:"apiName"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.apiApply.apiName,callback:function(t){e.$set(e.apiApply,"apiName",t)},expression:"apiApply.apiName"}})],1),a("el-form-item",{attrs:{label:"接口类型：","label-width":e.formLabelWidth,prop:"apiType"}},[a("el-select",{attrs:{placeholder:"请选择接口类型"},model:{value:e.apiApply.apiType,callback:function(t){e.$set(e.apiApply,"apiType",t)},expression:"apiApply.apiType"}},e._l(e.scenes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"API地址：","label-width":e.formLabelWidth,prop:"apiAddress"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.apiApply.apiAddress,callback:function(t){e.$set(e.apiApply,"apiAddress",t)},expression:"apiApply.apiAddress"}})],1),a("el-form-item",{attrs:{label:"API内容：","label-width":e.formLabelWidth,prop:"apiMsg"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.apiApply.apiMsg,callback:function(t){e.$set(e.apiApply,"apiMsg",t)},expression:"apiApply.apiMsg"}})],1),a("el-form-item",{attrs:{label:"API描述：","label-width":e.formLabelWidth,prop:"apiDescribe"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.apiApply.apiDescribe,callback:function(t){e.$set(e.apiApply,"apiDescribe",t)},expression:"apiApply.apiDescribe"}})],1),a("el-form-item",{attrs:{label:"有限期限：","label-width":e.formLabelWidth,prop:"validityTerm"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.apiApply.validityTerm,callback:function(t){e.$set(e.apiApply,"validityTerm",t)},expression:"apiApply.validityTerm"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addApi("apiApply")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){return e.resetForm("apiApply")}}},[e._v("重置")])],1)],1),a("div",{staticClass:"datalist"},[a("el-table",{ref:"multipleTable",attrs:{data:e.InTableData,"cell-style":e.cellStyle,"row-class-name":e.tableRowClassName,"tooltip-effect":"dark",border:""},on:{"row-click":e.gotoInDetail}},[a("el-table-column",{attrs:{type:"selection",width:"35px"}}),a("el-table-column",{attrs:{prop:"id",width:"50px",label:"API ID"}}),a("el-table-column",{attrs:{prop:"apiName",label:"API 名称"}}),a("el-table-column",{attrs:{prop:"sceneName",label:"所属场景",width:"70"}}),a("el-table-column",{attrs:{prop:"apiAddress",label:"接口地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.apiAddress,callback:function(a){e.$set(t.row,"apiAddress",a)},expression:"scope.row.apiAddress"}})],1):a("span",[e._v(e._s(t.row.apiAddress))])]}}])}),a("el-table-column",{attrs:{prop:"validityTerm",label:"有效期"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-date-picker",{attrs:{clearable:!1,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.validityTerm,callback:function(a){e.$set(t.row,"validityTerm",a)},expression:"scope.row.validityTerm"}})],1):a("span",[e._v(e._s(t.row.validityTerm))])]}}])}),a("el-table-column",{attrs:{prop:"apiState",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.apiState,callback:function(a){e.$set(t.row,"apiState",a)},expression:"scope.row.apiState"}},e._l(e.optionsState,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):a("span",[e._v(e._s(t.row.apiState))])]}}])}),a("el-table-column",{attrs:{prop:"apiType",label:"接口类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.apiType,callback:function(a){e.$set(t.row,"apiType",a)},expression:"scope.row.apiType"}},e._l(e.optionType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):a("span",[e._v(e._s(t.row.apiType))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"关联外部的接口",width:"220","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.show?a("span",[a("el-select",{ref:"select",attrs:{multiple:"",placeholder:"请选择"},on:{"~focus":function(t){return e.getapi(t)}},model:{value:t.row.interfaceRelations,callback:function(a){e.$set(t.row,"interfaceRelations",a)},expression:"scope.row.interfaceRelations"}},e._l(e.allApis,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1):a("span",e._l(t.row.interfaceRelations,(function(t){return a("span",{key:t},[e._v(e._s(t)+" ")])})),0)]}}])}),a("el-table-column",{attrs:{id:"operate",label:"操作",width:"230px;"},on:{click:function(e){e.stopPropagation()}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{id:"edit",icon:"el-icon-edit"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleEdit(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{id:"edit",type:"primary",icon:"el-icon-circle-check"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleSave(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"启用",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show&&"已停用"==t.row.apiState,expression:"!scope.row.show &&scope.row.apiState == '已停用' ? true : false"}],attrs:{icon:"el-icon-video-play"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleStart(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show&&"已启用"==t.row.apiState,expression:"!scope.row.show &&scope.row.apiState == '已启用' ? true : false"}],attrs:{icon:"el-icon-video-pause"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleStop(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{icon:"el-icon-close"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleCancel(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{icon:"el-icon-document-copy"},nativeOn:{click:function(a){return a.stopPropagation(),e.copyLink(t.$index,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}],attrs:{type:"danger",icon:"el-icon-delete"},nativeOn:{click:function(a){return a.stopPropagation(),e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)],1),a("paginationOut",{attrs:{total:e.totalInt},on:{pageSizeHandle:e.SizeChange,currentPageHandle:e.CurrentChange}})],1)],1)],1)},o=[],i=a("1da1"),r=a("5530"),l=a("2909"),s=(a("96cf"),a("e9c4"),a("d81d"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("159b"),a("4de4"),a("99af"),a("a434"),a("13a9")),c=a("4099"),p=a("c9b7"),u={components:{paginationOut:c["a"]},data:function(){return{activeName:"first",outTableData:[],totalOut:0,currentPageOut:1,pageSizeOut:10,dateTime:"",formInline:{interfaceName:"",state:""},InTableData:[],totalInt:0,currentPageIn:1,pageSizeIn:10,formInlineIn:{apiName:"",apiState:""},optionType:[{value:"webservice",label:"webservice"},{value:"http",label:"http"},{value:"rpc",label:"rpc"}],optionsStateOut:[{value:"未启用",label:"未启用"},{value:"已停用",label:"已停用"},{value:"已启用",label:"已启用"}],optionsState:[{value:"已停用",label:"已停用"},{value:"已启用",label:"已启用"}],allApis:[],apiAddress:"",validityTerm:"",apiState:"",apiType:"",interfaceAddress:"",endtime:"",state:"",interfaceType:"",isEdit:!1,tableRowClassName:function(e){var t=e.rowIndex;return t%2===0?"success-row":t%2===1?"warning-row":""},cellStyle:function(e){var t=e.row,a=e.columnIndex;return"已启用"===t.state&&7===a||"已启用"===t.apiState&&6===a?"color: #409eff":"已停用"===t.state&&7===a||"已停用"===t.apiState&&6===a?"color: #EA1B29":void 0},dialogFormVisible:!1,apiApply:{apiDescribe:"",apiMsg:"",apiName:"",apiType:"",associativeApiId:"",createTime:"",sceneName:"",sceneId:"",supplierName:[],validityTerm:""},rules:{sceneId:[{required:!0,message:"请按提示选择",trigger:"change"}],supplierName:[{required:!0,message:"请按提示选择",trigger:"change"}],apiName:[{required:!0,message:"请按提示填入内容",trigger:"blur"}],apiType:[{required:!0,message:"请按提示选择",trigger:"change"}],apiAddress:[{required:!0,message:"请按提示填入内容",trigger:"blur"}],apiMsg:[{required:!0,message:"请按提示填入内容",trigger:"blur"}],apiDescribe:[{required:!0,message:"请按提示填入内容",trigger:"blur"}],validityTerm:[{required:!0,message:"请按提示选择",trigger:"change"}]},interfaceRelations:[],formLabelWidth:"130px",scenes:[{value:"webservice",label:"webservice"},{value:"http",label:"http"},{value:"rpc",label:"rpc"}],sceneName:[],value1:[]}},created:function(){this.getOutApiData(),this.getAppData(),"second"===this.$route.params.lable&&(this.activeName=this.$route.params.lable)},mounted:function(){},methods:{getapi:function(){var e=this;Object(s["h"])().then((function(t){console.log(t),localStorage.setItem("allApi",JSON.stringify(t));var a=t.map((function(e){return e.apiName}));a=Object(l["a"])(new Set(a)),e.allApis=a.map((function(e){return e={value:e,label:e},e})),console.log(e.allApis)}))},getScene:function(){var e=this;Object(s["g"])().then((function(t){console.log(t);var a=[];t.map((function(e){a.push({label:e.sceneName,value:e.id})})),console.log(a),e.sceneName=a}))},resetForm:function(e){this.$refs[e].resetFields()},addApi:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=JSON.parse(localStorage.getItem("allApi")),n=[];t.apiApply.supplierName.forEach((function(e){n.push.apply(n,Object(l["a"])(a.filter((function(t){return t.apiName===e}))))})),console.log(n),t.interfaceRelations=n,t.apiApply.supplierName="",console.log("新增数据",t.apiApply),Object(s["a"])({apiApply:t.apiApply,interfaceRelations:t.interfaceRelations}).then((function(e){t.$message({message:"添加成功",type:"success"}),t.dialogFormVisible=!1,t.getAppData()}))}))},copyLink:function(e,t){var a="";a="associativeApiId"in t?"API ID: ".concat(t.id,"; API名称: ").concat(t.apiName,"; 所属场景: ").concat(t.serviceType,"; 接口地址: ").concat(t.apiAddress,"; 有效期: ").concat(t.validityTerm,"; 状态: ").concat(t.apiState,"; 接口类型: ").concat(t.apiType,"; 关联外部的接口: ").concat(t.interfaceRelations):"API ID: ".concat(t.serviceId,"; API名称: ").concat(t.interfaceName,"; 接口地址: ").concat(t.interfaceAddress,"; 供应商: ").concat(t.supplierName,"; 有效期: ").concat(t.endtime,"; 状态: ").concat(t.state,"; 接口类型: ").concat(t.interfaceType),a=JSON.stringify(a);var n=document.createElement("input");n.value=a,document.body.appendChild(n),n.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),n.remove()},onSubmit:function(){this.getOutApiData()},gotoOutDetail:function(e,t){"操作"!==t.label&&this.$router.push({path:"/api/apiInfo",query:Object(r["a"])(Object(r["a"])({},e),{},{label:1})})},gotoInDetail:function(e,t){"操作"!==t.label&&this.$router.push({path:"/api/apiInfo",query:Object(r["a"])(Object(r["a"])({},e),{},{label:2})})},onSubmitIn:function(){this.getAppData()},getOutApiData:function(){var e=this;Object(s["m"])(this.currentPageOut,this.pageSizeOut,this.formInline).then((function(t){e.totalOut=t.total,t.records.forEach((function(e){1===e.state&&(e.state="已启用"),2===e.state&&(e.state="已停用"),0===e.state&&(e.state="未启用"),e.show=!1})),e.outTableData=t.records}))},handleSizeChange:function(e){this.pageSizeOut=e,this.getOutApiData()},handleCurrentChange:function(e){this.currentPageOut=e,this.getOutApiData()},handleEditOut:function(e,t){if(console.log("编辑状态",this.isEdit),"已启用"!==t.state)return this.isEdit?void this.$message.warning("有文件没有保存,请先保存后再操作!"):(this.interfaceAddress=t.interfaceAddress,this.endtime=t.endtime,this.state=t.state,this.interfaceType=t.interfaceType,this.outTableData[e].show=!this.outTableData[e].show,void(this.isEdit=!0));this.$message.warning("已启用接口，请停用后再编辑!")},handleCancelOut:function(e,t){var a=this;this.$confirm("此操作将不修改该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then((function(){a.outTableData[e].show=!a.outTableData[e].show,a.outTableData[e].interfaceAddress=a.interfaceAddress,a.outTableData[e].endtime=a.endtime,a.outTableData[e].state=a.state,a.outTableData[e].interfaceType=a.interfaceType,a.isEdit=!1,a.$message.success("内容无更改!")})).catch((function(){}))},handleSaveOut:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("saveDATA",t),a.outTableData[e].show=!a.outTableData[e].show,a.isEdit=!1,"未启用"===t.state?o=0:"已启用"===t.state?o=1:"已停用"===t.state&&(o=2),n.next=6,Object(s["q"])(Object(r["a"])(Object(r["a"])({},t),{},{state:o}));case 6:a.$message.success("保存成功!");case 7:case"end":return n.stop()}}),n)})))()},handleDeleteOut:function(e,t){var a=this;"已启用"!==t.state?this.isEdit?this.$message.warning("有文件没有保存,请先保存后再操作!"):this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then((function(){a.outTableData.splice(e,1),a.$message.success("删除成功!"),Object(s["c"])(t.serviceId).then((function(e){console.log(e)}))})).catch((function(){a.$message.info("已取消删除")})):this.$message.warning("已启用接口，请停用后再删除!")},handleStartOut:function(e,t){var a=this;"已过期"!==Object(p["f"])(t.endtime)?(t.state="已启用",Object(s["q"])({serviceId:t.serviceId,state:1}).then((function(e){a.$message({type:"success",message:"已启用"})}))):this.$message({type:"warning",message:"已过有效期不能操作！"})},handleStopOut:function(e,t){var a=this;"已过期"!==Object(p["f"])(t.endtime)?(t.state="已停用",Object(s["q"])({serviceId:t.serviceId,state:2}).then((function(e){a.$message({type:"success",message:"已停用"})}))):this.$message({type:"warning",message:"已过有效期不能操作！"})},getAppData:function(){var e=this;Object(s["i"])(this.currentPageIn,this.pageSizeIn,this.formInlineIn).then((function(t){t.records.forEach((function(e){1===e.apiState?e.apiState="已启用":e.apiState="已停用",e.show=!1,e.interfaceRelations=Object(l["a"])(new Set(e.interfaceRelations.map((function(e){return e.apiName}))))})),e.InTableData=t.records,e.totalInt=t.total}))},SizeChange:function(e){console.log("父组件收到分页器pagesize：",e),this.pageSizeIn=e,this.getAppData()},CurrentChange:function(e){console.log("父组件收到分页器currentpage：",e),this.currentPageIn=e,this.getAppData()},handleEdit:function(e,t){if("已启用"!==t.apiState)return this.isEdit?void this.$message({type:"warning",message:"有文件没有保存,请先保存后再操作!"}):(this.apiAddress=t.apiAddress,this.validityTerm=t.validityTerm,this.apiState=t.apiState,this.apiType=t.apiType,this.interfaceRelations=t.interfaceRelations,this.InTableData[e].show=!this.InTableData[e].show,void(this.isEdit=!0));this.$message({type:"warning",message:"已启用接口，请停用后再编辑!"})},handleCancel:function(e,t){var a=this;this.$confirm("此操作将不修改该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then((function(){a.InTableData[e].show=!a.InTableData[e].show,a.InTableData[e].apiAddress=a.apiAddress,a.InTableData[e].validityTerm=a.validityTerm,a.InTableData[e].apiState=a.apiState,a.InTableData[e].apiType=a.apiType,a.InTableData[e].interfaceRelations=a.interfaceRelations,a.isEdit=!1,a.$message({type:"success",message:"内容无更改!"})})).catch((function(){}))},handleSave:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.InTableData[e].show=!a.InTableData[e].show,o=JSON.parse(localStorage.getItem("allApi")),i=[],a.interfaceRelations=t.interfaceRelations,a.interfaceRelations.forEach((function(e){i.push.apply(i,Object(l["a"])(o.filter((function(t){return t.apiName===e}))))})),a.interfaceRelations=i,c={apiApply:Object(r["a"])(Object(r["a"])({},t),{},{apiState:"已停用"===t.apiState?0:1}),interfaceRelations:a.interfaceRelations},a.isEdit=!1,n.next=10,Object(s["e"])(c);case 10:a.$message({type:"success",message:"保存成功!"});case 11:case"end":return n.stop()}}),n)})))()},handleDelete:function(e,t){var a=this;"已启用"!==t.apiState?this.isEdit?this.$message({type:"warning",message:"有文件没有保存,请先保存后再操作!"}):this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then((function(){a.InTableData.splice(e,1),Object(s["d"])(t.id).then((function(e){return console.log(e)})),a.$message({type:"success",message:"删除成功!"}),setTimeout((function(){a.getAppData()}),100)})).catch((function(){a.$message({type:"info",message:"已取消删除"})})):this.$message({type:"warning",message:"已启用接口，请停用后再删除!"})},handleStart:function(e,t){"已过期"!==Object(p["f"])(t.validityTerm)?(t.apiState="已启用",Object(s["r"])(t.id,1),this.$message({type:"success",message:"已启用"})):this.$message({type:"warning",message:"已过有效期不能操作！"})},handleStop:function(e,t){"已过期"!==Object(p["f"])(t.validityTerm)?(t.apiState="已停用",Object(s["r"])(t.id,0),this.$message({type:"success",message:"已停用"})):this.$message({type:"warning",message:"已过有效期不能操作！"})}}},d=u,f=(a("1057"),a("2877")),m=Object(f["a"])(d,n,o,!1,null,"5109831f",null);t["default"]=m.exports},"2f0f":function(e,t,a){},4099:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":e.pagesizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],i=(a("a9e3"),{props:{total:{type:Number,default:0}},data:function(){return{currentPage:1,pagesizes:10}},methods:{handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pagesizes=e,this.$emit("pageSizeHandle",this.pagesizes)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.$emit("currentPageHandle",this.currentPage)}}}),r=i,l=a("2877"),s=Object(l["a"])(r,n,o,!1,null,null,null);t["a"]=s.exports},c9b7:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"i",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"h",(function(){return p})),a.d(t,"e",(function(){return u})),a.d(t,"g",(function(){return d}));var n=a("53ca");a("d81d"),a("ac1f"),a("5319"),a("99af"),a("1276");function o(e){if("object"===Object(n["a"])(e)){var t=e.map((function(e){var t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,n=new Date(e).getDate();return t+"-"+a+"-"+n}));return t}}function i(e){switch(e){case"日":return 1;case"周":return 2;case"月":return 3;case"季":return 4;case"年":return 5;default:return 1}}function r(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function l(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=t+"-"+a+"-"+n;return o}function s(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate();n=n<10?"0"+n:n;var o=e.getHours();o=o<10?"0"+o:o;var i=e.getMinutes();i=i<10?"0"+i:i;var r=e.getSeconds();r=r<10?"0"+r:r;var l=t+"-"+a+"-"+n,s=o+":"+i+":"+r,c="".concat(l," ").concat(s);return c}function c(e){var t=Date.parse(new Date),a=Date.parse(new Date(Date.parse((e+"").replace(/-/g,"/"))));return a-t<0?"已过期":a-t>=0?"未过期":void 0}function p(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=t+"-"+a+"-"+n+" 00:00:00",i=t+"-"+a+"-"+n+" 23:59:59",r=[o,i];return r}function u(){var e=new Date((new Date).getTime()-864e5),t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=t+"-"+a+"-"+n+" 00:00:00",i=t+"-"+a+"-"+n+" 23:59:59",r=[o,i];return r}function d(e){var t=e[0],a=e[1],n=new Date(a).getTime()-new Date(t).getTime(),o=Math.floor(n/864e5),i=n%864e5,r=Math.floor(i/36e5),l=i%36e5,s=Math.floor(l/6e4),c=l%6e4,p=Math.round(c/1e3);return o+"天 "+r+"小时 "+s+" 分钟"+p+" 秒"}}}]);