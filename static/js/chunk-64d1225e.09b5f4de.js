(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64d1225e"],{"089a":function(t,e,a){},"10af":function(t,e,a){},6649:function(t,e,a){"use strict";a("10af")},"8c5d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基础信息")]),a("el-button",{staticClass:"el-icon-edit-outline",staticStyle:{padding:"0 10px","font-size":"18px"},attrs:{type:"text"},on:{click:function(e){return t.$router.push("/customer/customerEdit/"+t.id)}}})],1),a("div",{staticStyle:{padding:"0 15px"}},[a("el-descriptions",{attrs:{title:"",column:3}},[a("el-descriptions-item",{attrs:{label:"客户ID"}},[t._v(t._s(t.customer.id))]),a("el-descriptions-item",{attrs:{label:"客户名称"}},[t._v(t._s(t.customer.name))]),a("el-descriptions-item",{attrs:{label:"客户简称"}},[t._v(t._s(t.customer.abbreviation))]),a("el-descriptions-item",{attrs:{label:"联系人"}},[t._v(t._s(t.customer.contacts)+" "),a("el-popover",{attrs:{placement:"right",title:"全部联系人",width:"600",trigger:"click"}},[a("el-table",{attrs:{data:t.contact}},[a("el-table-column",{attrs:{prop:"contacts",label:"联系人",width:"180"}}),a("el-table-column",{attrs:{prop:"contactsNumber",label:"电话",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.contactsNumber.split(/,|，/),(function(e){return a("div",{key:e},[t._v(t._s(e))])}))}}])}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.email.split(/,|，/),(function(e){return a("div",{key:e},[t._v(t._s(e))])}))}}])})],1),a("el-button",{staticStyle:{height:"20px"},attrs:{slot:"reference",type:"text",color:"#ccc"},slot:"reference"},[a("i",{staticClass:"el-icon-question"})])],1)],1),a("el-descriptions-item",{attrs:{label:"联系电话"}},[t._v(t._s(t.customer.contactsNumber))]),a("el-descriptions-item",{attrs:{label:"联系邮箱"}},[t._v(t._s(t.customer.email))])],1)],1)]),a("div",{staticStyle:{margin:"8px"}}),a("div",{staticStyle:{border:"1px solid #eee"}},[a("ContractInfo",{attrs:{"contract-data":t.cooperationList,"cooperate-date":t.apiAssociativeInfoVoList},on:{renewal:t.renewalClick,tabClick:t.tabClick}}),a("div",{staticClass:"title"},[a("span",{staticClass:"label"}),t._v("标签查询情况 "),a("span",{staticStyle:{"margin-left":"10px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查看计费明细",placement:"top"}},[a("el-button",{staticClass:"el-icon-s-grid",staticStyle:{"font-size":"18px"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"billingInventory",params:{name:t.customer.name,time:[t.startTime,t.endTime],type:2}})}}})],1)],1),a("span",{staticStyle:{"margin-left":"10px"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:function(e){return t.filterData()}},model:{value:t.mark,callback:function(e){t.mark=e},expression:"mark"}},[a("el-radio-button",{attrs:{label:1}},[t._v("日")]),a("el-radio-button",{attrs:{label:2}},[t._v("周")]),a("el-radio-button",{attrs:{label:3}},[t._v("月")]),a("el-radio-button",{attrs:{label:4}},[t._v("季")]),a("el-radio-button",{attrs:{label:5}},[t._v("年")])],1)],1)]),a("div",{staticStyle:{height:"420px"}},[t.time.length?a("LineChart",{attrs:{data:t.series,time:t.time}}):a("el-empty",{staticStyle:{height:"100%"},attrs:{description:"暂无数据"}})],1)],1)],1)},n=[],r=a("1da1"),o=(a("96cf"),a("d81d"),a("4de4"),a("d3b7"),a("e9c4"),a("159b"),a("b0c0"),a("f6b0")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{staticStyle:{"padding-left":"10px"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.contractData,(function(e,i){return a("el-tab-pane",{key:i,attrs:{label:"合作信息"+(i+1),value:i}},[e.isdot&&i!==Number(t.activeName)?a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s("合作信息"+(i+1))),a("el-badge",{staticClass:"item",attrs:{"is-dot":""}})],1):t._e(),t.contractData.length?a("div",{staticStyle:{padding:"0 15px","border-bottom":"1px solid #eee"}},[a("el-descriptions",{attrs:{title:"",column:3,"label-class-name":"myLable"}},[a("el-descriptions-item",{attrs:{label:"合作方式"}},[t._v(t._s(e.cooperationMod))]),a("el-descriptions-item",{attrs:{label:"合同生效日期"}},[t._v(t._s(e.startTime.split("T")[0]))]),a("el-descriptions-item",{attrs:{label:"结算周期"}},[t._v(t._s(e.settleAccountsCycle))]),a("el-descriptions-item",{attrs:{label:"合同编号"}},[t._v(t._s(e.cooperationNumber))]),a("el-descriptions-item",{attrs:{label:"合同期限"}},[t._v(t._s(e.cooperationTerm/12+"年")),e.isdot?a("span",{staticStyle:{"background-color":"#d9001b",padding:"5px",color:"#fff","font-size":"12px","margin-left":"5px",cursor:"pointer"},on:{click:function(e){return t.renewal(i)}}},[t._v("临期合同")]):t._e()]),a("el-descriptions-item",{attrs:{label:"结算日期"}},[t._v(t._s(e.settleAccountsDay))]),a("el-descriptions-item",{attrs:{label:"合作状态"}},[t._v(t._s(e.cooperationState))])],1)],1):t._e()])})),1),a("div",[t._m(0),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cooperateDate,border:"","cell-style":{textAlign:"center"},"header-cell-style":{"background-color":"#f5f5f5",textAlign:"center"}}},[t._v(" > "),a("el-table-column",{attrs:{prop:"apiName",label:"API名称"}}),a("el-table-column",{attrs:{prop:"chargingMod",label:"计费模式名称"}}),a("el-table-column",{attrs:{prop:"chargingStandard",label:"计费单价（元或次）"}}),a("el-table-column",{attrs:{prop:"useState",label:"服务状态",formatter:t.stateFormat}}),a("el-table-column",{attrs:{"min-width":"180",prop:"apiMsg",label:"服务内容"}})],1)],1)],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("div",{staticClass:"label"}),t._v("服务内容 ")])}],l=(a("ac1f"),a("1276"),a("a9e3"),{filters:{dateChange:function(t){return t.split(" ")[0]}},props:{contractData:{type:Array,default:function(){return[]}},cooperateDate:{type:Array,default:function(){return[]}}},data:function(){return{activeName:"0",flag:!1}},methods:{renewal:function(t){this.$emit("renewal",t)},tabClick:function(){this.$emit("tabClick",Number(this.activeName))},stateFormat:function(t){return"1"===t.useState?"正常":"异常"}}}),u=l,d=(a("a6fb"),a("2877")),p=Object(d["a"])(u,s,c,!1,null,"cda49ad2",null),m=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"myChart",staticStyle:{height:"100%",width:"100%"}})},b=[],h=a("22b4"),v=a("1be7"),g=a("4b2a"),y=a("104d"),_=a("3620"),x=a("c55a"),S=a("f95e"),w=a("ff32"),k=a("2da7");h["a"]([g["a"],y["a"],_["a"],S["a"],k["a"],w["a"],x["a"]]);var C={props:{time:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},option:{type:Object,default:function(){return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{x:80,y:50,x2:110,y2:50,containLabel:!0},dataZoom:[{show:!0,start:0,end:100},{type:"inside",start:0,end:100}],legend:{},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,960],type:"line"}]}}}},data:function(){return{chart:""}},watch:{option:{handler:function(t,e){console.log(t),this.chart?t?(this.chart.clear(),this.chart.setOption(t)):this.chart.setOption(e):this.init()},deep:!0},data:{deep:!0,immediate:!0,handler:function(t){console.log(t,"data"),this.option.series=t}},time:{deep:!0,immediate:!0,handler:function(t){console.log(t,"time"),this.option.xAxis.data=t}}},mounted:function(){this.init()},methods:{init:function(){this.chart=v["b"](this.$refs.myChart),this.chart.setOption(this.option)}}},A=C,L=Object(d["a"])(A,f,b,!1,null,null,null),I=L.exports,N=a("ed08"),D={components:{ContractInfo:m,LineChart:I},data:function(){return{id:"",mark:1,contact:[],customer:[],cooperationList:[],apiAssociativeInfoVoList:[],data:{apiAssociativeInfoVoList:[]},list:[],flag:!1,series:[],mainKey:{time:[]},time:[],startTime:"",endTime:""}},created:function(){this.id=this.$route.params.id,this.endTime=Object(N["a"])("YYYY-mm-dd HH:MM:SS",new Date),this.startTime=Object(N["a"])("YYYY-mm-dd HH:MM:SS",new Date((new Date).getTime()-2592e6)),this.getCustomerInfo()},methods:{getCustomerInfo:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("customer/getCustomerInfoById",t.id);case 2:a=e.sent,t.contact=a.contact,t.cooperationList=a.cooperationList,t.cooperationList.map((function(t){var e=!1,a=new Date(t.endTime).getTime()-(new Date).getTime(),i=Math.ceil(a/864e5);i>0&&i<30&&(e=!0),t.isdot=e})),t.customer=a.customer,t.data.apiAssociativeInfoVoList=a.apiAssociativeInfoVoList,t.apiAssociativeInfoVoList=t.data.apiAssociativeInfoVoList.filter((function(e){return e.cooperationNum===t.cooperationList[0].cooperationNumber})),t.filterData();case 10:case"end":return e.stop()}}),e)})))()},renewalClick:function(t){this.$router.push({path:"/customer/customerEdit/".concat(this.id),query:{index:t}})},tabClick:function(t){var e=this;this.apiAssociativeInfoVoList=this.data.apiAssociativeInfoVoList.filter((function(a){return a.cooperationNum===e.cooperationList[t].cooperationNumber})),console.log(this.apiAssociativeInfoVoList),this.filterData()},deepCopy:function(t){return JSON.parse(JSON.stringify(t))},filterData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.mainKey={time:[]},e.next=3,Object(o["c"])({id:t.id,type:t.mark});case 3:for(n in a=e.sent,t.apiAssociativeInfoVoList.forEach((function(e){t.mainKey[e.apiName]=[]})),t.mainKey.time=[],t.mainKey=Object(N["b"])(t.mainKey,a),i=[],t.time=t.mainKey.time,t.mainKey)r={name:"Direct",type:"line",emphasis:{focus:"series"},data:[320,332,301,334,390,330,320]},"time"!==n&&(r.name=n,r.data=t.mainKey[n],i.push(r));t.series=i,console.log(t.series,t.time);case 12:case"end":return e.stop()}}),e)})))()}}},O=D,T=(a("6649"),Object(d["a"])(O,i,n,!1,null,"1af84512",null));e["default"]=T.exports},a6fb:function(t,e,a){"use strict";a("089a")},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return r}));a("53ca"),a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("1276"),a("159b"),a("d81d"),a("4de4");function i(t,e){for(var a in t)t[a]=[];return e.map((function(e){var a=[];for(var i in t)a.push(i);var n=function(t){a=a.filter((function(e){return e!==t}))};for(var r in e)n(r);for(var o in a.map((function(t){e[t]=0})),e)for(var s in t)o===s&&t[s].push(e[o])})),t}function n(t){var e=[];for(var a in t){var i={name:"Direct",barMaxWidth:30,type:"bar",emphasis:{focus:"series"},data:[320,332,301,334,390,330,320]};"time"!==a&&(i.name=a,i.data=t[a],e.push(i))}return e}function r(t,e){var a,i={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var n in i)a=new RegExp("("+n+")").exec(t),a&&(t=t.replace(a[1],1===a[1].length?i[n]:i[n].padStart(a[1].length,"0")));return t}}}]);