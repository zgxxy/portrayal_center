(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214092c8"],{"13a9":function(t,e,a){"use strict";a.d(e,"m",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return u})),a.d(e,"r",(function(){return d})),a.d(e,"h",(function(){return f})),a.d(e,"a",(function(){return p})),a.d(e,"g",(function(){return m})),a.d(e,"p",(function(){return h})),a.d(e,"n",(function(){return g})),a.d(e,"o",(function(){return v})),a.d(e,"b",(function(){return b})),a.d(e,"q",(function(){return w})),a.d(e,"c",(function(){return y})),a.d(e,"j",(function(){return S})),a.d(e,"k",(function(){return x})),a.d(e,"l",(function(){return T})),a.d(e,"f",(function(){return D}));var r=a("5530"),n=(a("99af"),a("b775")),i=a("e686"),o=a.n(i);function l(t,e,a){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/Inerface/page/").concat(t,"/").concat(e),method:"post",params:Object(r["a"])({},a)})}function c(t,e,a){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/pageToApply"),method:"post",params:Object(r["a"])({pageNo:t,pageSize:e},a)})}function s(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/updateApi"),method:"post",data:t})}function u(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/delApiApply/").concat(t),method:"delete"})}function d(t,e){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/manualState/").concat(t,"/").concat(e),method:"post"})}function f(){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/getAssociativeApi"),method:"get"})}function p(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/api/saveApi"),method:"post",data:t})}function m(){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/scene/findAllScene"),method:"get"})}function h(t,e,a){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/alarmLog/findAllAlarmInterfacePage"),method:"post",params:Object(r["a"])({pageNo:t,pageSize:e},a)})}function g(){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/alarmLog/findAlarmInterfacePage"),method:"post"})}function v(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/alarmLog/findAlarmLogByide"),method:"post",params:{id:t}})}function b(t,e){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/alarmLog/updateAlarmInterface/").concat(t,"/").concat(e),method:"put"})}function w(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/Inerface/updateInterface"),method:"put",params:t})}function y(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/supplier/delectInterface/").concat(t),method:"delete"})}function S(t,e){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/Inerface/page/").concat(t,"/").concat(e),method:"post"})}function x(t,e){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/Inerface/findInterfaceTimeCountCall"),method:"post",params:t,data:e})}function T(t){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/Inerface/queryAverageDayTrafficById/").concat(t),method:"post"})}function D(){return Object(n["a"])({url:"".concat(o.a.ProxyUrl,"/alarmLog/findAlarmCount"),method:"get"})}},"33e1":function(t,e,a){},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),i=a("7b0b"),o=a("50c4"),l=a("a691"),c=a("1d80"),s=a("8aa5"),u=a("14c3"),d=Math.max,f=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=r.REPLACE_KEEPS_$0,w=v?"$":"$0";return[function(a,r){var n=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!v&&b||"string"===typeof r&&-1===r.indexOf(w)){var i=a(e,t,this,r);if(i.done)return i.value}var c=n(t),p=String(this),m="function"===typeof r;m||(r=String(r));var h=c.global;if(h){var S=c.unicode;c.lastIndex=0}var x=[];while(1){var T=u(c,p);if(null===T)break;if(x.push(T),!h)break;var D=String(T[0]);""===D&&(c.lastIndex=s(p,o(c.lastIndex),S))}for(var I="",O=0,_=0;_<x.length;_++){T=x[_];for(var j=String(T[0]),A=d(f(l(T.index),p.length),0),L=[],P=1;P<T.length;P++)L.push(g(T[P]));var k=T.groups;if(m){var U=[j].concat(L,A,p);void 0!==k&&U.push(k);var E=String(r.apply(void 0,U))}else E=y(j,p,A,L,k,r);A>=O&&(I+=p.slice(O,A)+E,O=A+j.length)}return I+p.slice(O)}];function y(t,a,r,n,o,l){var c=r+t.length,s=n.length,u=h;return void 0!==o&&(o=i(o),u=m),e.call(l,u,(function(e,i){var l;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":l=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>s){var d=p(u/10);return 0===d?e:d<=s?void 0===n[d-1]?i.charAt(1):n[d-1]+i.charAt(1):e}l=n[u-1]}return void 0===l?"":l}))}}))},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"94f3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warnDetail"},[a("div",{staticClass:"content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("告警列表")])]),a("el-table",{staticStyle:{cursor:"pointer"},attrs:{data:t.warnList,border:"","highlight-current-row":"","row-class-name":t.backgroundColor},on:{"row-click":t.getRightDate}},[a("el-table-column",{attrs:{prop:"interfaceName",label:"告警接口"}}),a("el-table-column",{attrs:{prop:"supplierName",label:"接口对接方"}})],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("告警详情信息")]),a("el-button",{staticStyle:{float:"right","margin-top":"4px"},attrs:{type:"primary"},on:{click:t.gotoBack}},[t._v("返回")])],1),0!==t.warnTotal.total?a("el-descriptions",{attrs:{title:"",column:2,"label-class-name":"myLable"}},[a("el-descriptions-item",{attrs:{label:"告警信息编号"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].alarmId))]),a("el-descriptions-item",{attrs:{label:"告警原因"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].alarmName))]),a("el-descriptions-item",{attrs:{label:"首次告警时间"}},[t._v(t._s(t.warnTotal.warnDetail[0].alarmTime))]),a("el-descriptions-item",{attrs:{label:"最后告警时间"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].alarmTime))]),a("el-descriptions-item",{attrs:{label:"持续时间"}},[t._v(t._s(t.warnTotal.duringTime))]),a("el-descriptions-item",{attrs:{label:"告警等级"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].level)+"告警")]),a("el-descriptions-item",{attrs:{label:"修复状态"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].repairState))]),a("el-descriptions-item",{attrs:{label:"处理状态"}},[t._v(t._s(t.warnTotal.warnDetail[t.warnTotal.warnDetail.length-1].processState))]),a("el-descriptions-item",{attrs:{label:"波及影响"}})],1):t._e(),0===t.warnTotal.total?a("div",{staticStyle:{width:"100%",height:"100px",display:"flex","justify-content":"center","align-items":"center"}},[a("span",[t._v("暂无数据")])]):a("el-descriptions",{attrs:{title:"",column:2,"label-class-name":"myLable"}},[a("el-descriptions-item",{attrs:{label:"本次告警次数"}},[t._v(t._s(t.warnTotal.total)+" 次")])],1),a("el-table",{attrs:{data:t.warnDetail,border:""}},[a("el-table-column",{attrs:{prop:"alarmTime",label:"告警时间"}}),a("el-table-column",{attrs:{prop:"level",label:"告警等级"}}),a("el-table-column",{attrs:{prop:"alarmName",label:"告警原因","min-width":"120"}}),a("el-table-column",{attrs:{prop:"processState",label:"处理状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"未处理"===e.row.processState?"fixed":""},[t._v(" "+t._s(e.row.processState))])]}}])}),a("el-table-column",{attrs:{prop:"repairState",label:"修复状态"}})],1),a("div",{attrs:{id:"Realtimetraffic"}},[a("div",{attrs:{id:"title"}},[a("span",[t._v("实时流量")])]),a("Realtimetraffic",{attrs:{list:t.List}})],1),a("div",{staticClass:"historyWarn"},[a("div",{attrs:{id:"title"}},[a("span",[t._v("历史告警")])]),a("el-table",{attrs:{data:t.historyWarn,border:""}},[a("el-table-column",{attrs:{prop:"alarmName",label:"告警原因","min-width":"120"}}),a("el-table-column",{attrs:{prop:"level",label:"告警等级","min-width":"50"}}),a("el-table-column",{attrs:{prop:"alarmTime",label:"告警时间","min-width":"120"}}),a("el-table-column",{attrs:{prop:"repairState",label:"修复状态"}}),a("el-table-column",{attrs:{prop:"",label:"修复人"}}),a("el-table-column",{attrs:{prop:"",label:"修复描述"}})],1)],1)],1)],1)])},n=[],i=a("1da1"),o=(a("96cf"),a("d3b7"),a("159b"),a("d81d"),a("fb6a"),a("4de4"),a("c9b7")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"liuliang",staticClass:"liuliang",staticStyle:{"min-width":"500px",height:"400px"}})},c=[],s=a("22b4"),u=a("1be7"),d=a("2da7"),f=a("4b2a"),p=a("ff32"),m=a("3620"),h=a("c55a"),g=a("f95e"),v=["#5470C6","#EE6666","#000"];s["a"]([d["a"],f["a"],p["a"],m["a"],g["a"],h["a"]]);var b={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{chart:"",option:{color:v,tooltip:{trigger:"axis"},legend:{data:["今日流量","日平均流量"],top:0},grid:{left:"0%",right:"10%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:v[1]}},data:this.list[0].title},{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:v[0]}},data:this.list[1].title}],yAxis:[{type:"value",name:"(次)",axisLine:{show:!0,lineStyle:{color:v[2]}}}],series:[{name:"日平均流量",type:"line",smooth:!0,xAxisIndex:1,emphasis:{focus:"series"},data:this.list[1].data},{name:"今日流量",type:"line",smooth:!0,xAxisIndex:0,emphasis:{focus:"series"},data:this.list[0].data}]}}},watch:{option:{handler:function(t,e){this.chart?t?this.chart.setOption(t):this.chart.setOption(e):this.init()},deep:!0},list:{handler:function(){this.option.xAxis[0].data=this.list[0].title,this.option.xAxis[1].data=this.list[1].title,this.option.series[0].data=this.list[1].data,this.option.series[1].data=this.list[0].data},deep:!0}},mounted:function(){this.init()},methods:{init:function(){this.chart=u["b"](this.$refs.liuliang),this.chart.setOption(this.option,!0)}}},w=b,y=a("2877"),S=Object(y["a"])(w,l,c,!1,null,null,null),x=S.exports,T=a("13a9"),D={components:{Realtimetraffic:x},data:function(){return{warnList:[],warnDetail:[],historyWarn:[],warnTotal:{warnDetail:[{alarmId:"无",alarmName:"无",alarmTime:"无",level:"无",repairState:"无",processState:"无"}],total:0,duringTime:0},warnTimes:"",startTime:Object(o["h"])()[0],endTime:Object(o["h"])()[1],mark:0,List:[{title:["无数据"],data:[0]},{title:["无数据"],data:[0]}],index:0,tempTime:[]}},created:function(){this.getData(),void 0!==this.$route.query.alarmInterfaceId?(this.getWarningList(1,999,{alarmInterfaceId:this.$route.query.alarmInterfaceId}),this.getWarnTimes(this.$route.query.alarmInterfaceId),this.getLiuLang([this.$route.query.alarmInterfaceId])):this.warnTotal={warnDetail:[{alarmId:"无",alarmName:"无",alarmTime:"无",level:"无",repairState:"无",processState:"无"}],total:0,duringTime:0}},methods:{backgroundColor:function(t){var e=t.rowIndex;return this.index===e?"yellow":""},getLiuLang:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=[],a.next=3,Object(T["l"])(t[0]).then((function(t){var a=[],n=[];0!==t.length?(t.forEach((function(t){a.push(t.sum),n.push(t.time)})),r.unshift({title:n,data:a})):r.unshift({title:["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],data:[0,0,0,0,0,0,0,0,0,0]}),e.tempTime=n}));case 3:return a.next=5,Object(T["k"])({startTime:e.startTime,endTime:e.endTime,mark:e.mark},t).then((function(t){var a=[],n=[];if(0!==t[0].interface.length)t[0].interface.forEach((function(t){a.push(t.sum),n.push(t.time)})),r.unshift({title:n,data:a});else{for(var i=[],o=0;o<e.tempTime.length;o++)i.push(0);r.unshift({title:e.tempTime,data:i})}}));case 5:e.List=r;case 6:case"end":return a.stop()}}),a)})))()},getData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(T["n"])().then((function(e){t.warnList=e.records,e.records.map((function(e,a){e.interfaceName===t.$route.query.alarmInterfaceName&&(t.index=a)}))}));case 2:case"end":return e.stop()}}),e)})))()},gotoBack:function(){this.$router.push("apiMonitoring")},getRightDate:function(t,e){this.index=-1,this.getWarnTimes(t.serviceId),this.getWarningList(1,999,{alarmInterfaceId:t.serviceId}),this.getLiuLang([t.serviceId])},getWarnTimes:function(t){var e=this;Object(T["o"])(t).then((function(t){if(0===t.length)return e.warnTotal={warnDetail:[{alarmId:"无",alarmName:"无",alarmTime:"无",level:"无",repairState:"无",processState:"无"}],total:0,duringTime:0},e.warnDetail=[],void(e.historyWarn=[]);var a=[t[0].alarmTime,t[t.length-1].alarmTime];t.forEach((function(t){t.repairState=0===t.repairState?"未修复":"已修复正常",0===t.processState&&(t.processState="未处理"),1===t.processState&&(t.processState="处理中"),2===t.processState&&(t.processState="已处理"),1===t.level&&(t.level="一级"),2===t.level&&(t.level="二级"),3===t.level&&(t.level="三级")})),e.warnDetail=t,e.warnTotal.warnDetail=t,e.warnTotal.total=t.length,e.warnTotal.duringTime=Object(o["g"])(a),e.historyWarn=t.slice(0,5)}))},getWarningList:function(t,e,a){var r=this;this.warnTotal={warnDetail:[{alarmId:"无",alarmName:"无",alarmTime:"无",level:"无",repairState:"无",processState:"无"}],total:0,duringTime:"无"},Object(T["p"])(t,e,a).then((function(t){0!==t.records.length&&(t.records.forEach((function(t){t.repairState=0===t.repairState?"未修复":"已修复正常",0===t.processState&&(t.processState="未处理"),1===t.processState&&(t.processState="处理中"),2===t.processState&&(t.processState="已处理"),1===t.level&&(t.level="一级"),2===t.level&&(t.level="二级"),3===t.level&&(t.level="三级")})),console.log(t),r.historyWarn=t.records.filter((function(t){return"已处理"===t.processState})))}))}}},I=D,O=(a("9729"),Object(y["a"])(I,r,n,!1,null,"7681feea",null));e["default"]=O.exports},9729:function(t,e,a){"use strict";a("33e1")},c9b7:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"i",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"f",(function(){return s})),a.d(e,"h",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"g",(function(){return f}));var r=a("53ca");a("d81d"),a("ac1f"),a("5319"),a("99af"),a("1276");function n(t){if("object"===Object(r["a"])(t)){var e=t.map((function(t){var e=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate();return e+"-"+a+"-"+r}));return e}}function i(t){switch(t){case"日":return 1;case"周":return 2;case"月":return 3;case"季":return 4;case"年":return 5;default:return 1}}function o(t){return t.replace(/(^\s*)|(\s*$)/g,"")}function l(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),n=e+"-"+a+"-"+r;return n}function c(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var n=t.getHours();n=n<10?"0"+n:n;var i=t.getMinutes();i=i<10?"0"+i:i;var o=t.getSeconds();o=o<10?"0"+o:o;var l=e+"-"+a+"-"+r,c=n+":"+i+":"+o,s="".concat(l," ").concat(c);return s}function s(t){var e=Date.parse(new Date),a=Date.parse(new Date(Date.parse((t+"").replace(/-/g,"/"))));return a-e<0?"已过期":a-e>=0?"未过期":void 0}function u(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),n=e+"-"+a+"-"+r+" 00:00:00",i=e+"-"+a+"-"+r+" 23:59:59",o=[n,i];return o}function d(){var t=new Date((new Date).getTime()-864e5),e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),n=e+"-"+a+"-"+r+" 00:00:00",i=e+"-"+a+"-"+r+" 23:59:59",o=[n,i];return o}function f(t){var e=t[0],a=t[1],r=new Date(a).getTime()-new Date(e).getTime(),n=Math.floor(r/864e5),i=r%864e5,o=Math.floor(i/36e5),l=i%36e5,c=Math.floor(l/6e4),s=l%6e4,u=Math.round(s/1e3);return n+"天 "+o+"小时 "+c+" 分钟"+u+" 秒"}},d28b:function(t,e,a){var r=a("746f");r("iterator")},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),o=a("5135"),l=a("861d"),c=a("9bf2").f,s=a("e893"),u=i.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};s(f,u);var p=f.prototype=u.prototype;p.constructor=f;var m=p.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=m.call(t);if(o(d,t))return"";var a=h?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:f})}},fb6a:function(t,e,a){"use strict";var r=a("23e7"),n=a("861d"),i=a("e8b5"),o=a("23cb"),l=a("50c4"),c=a("fc6a"),s=a("8418"),u=a("b622"),d=a("1dde"),f=a("ae40"),p=d("slice"),m=f("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!p||!m},{slice:function(t,e){var a,r,u,d=c(this),f=l(d.length),p=o(t,f),m=o(void 0===e?f:e,f);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(d,p,m);for(r=new(void 0===a?Array:a)(v(m-p,0)),u=0;p<m;p++,u++)p in d&&s(r,u,d[p]);return r.length=u,r}})}}]);