(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6590bc42"],{"0588":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/supplier/supplierAdd")}}},[e._v(" + 新增 ")]),n("div",[e._v(" 供应商名称："),n("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.testData.supplierName,callback:function(t){e.$set(e.testData,"supplierName",t)},expression:"testData.supplierName"}}),e._v(" 状态："),n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.testData.state,callback:function(t){e.$set(e.testData,"state",t)},expression:"testData.state"}},[n("el-option",{attrs:{label:"查看所有",value:""}}),n("el-option",{attrs:{label:"未启用",value:"0"}}),n("el-option",{attrs:{label:"正常",value:"1"}}),n("el-option",{attrs:{label:"已停用",value:"2"}})],1),n("span",{staticStyle:{margin:"0 10px"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getSupplierMes()}}},[e._v("查询")])],1),n("div",{staticStyle:{margin:"10px"}}),n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"",align:"center",data:e.supplierData,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center"}},on:{"row-click":e.tableClick}},[n("el-table-column",{attrs:{type:"selection",width:"30"}}),n("el-table-column",{attrs:{prop:"supplierId",label:"供应商ID"}}),n("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.supplierName)+" "),new Date(t.row.endTime.split("T")[0]).getTime()-(new Date).getTime()<=2592e6&&new Date(t.row.endTime.split("T")[0]).getTime()-(new Date).getTime()>0?n("span",{staticStyle:{"background-color":"#ec808d"}},[e._v("临期合同")]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"startTime",label:"合作开始时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.startTime.split("T").join(" "))+" ")]}}])}),n("el-table-column",{attrs:{prop:"endTime",label:"合作结束时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.endTime.split("T").join(" "))+" ")]}}])}),n("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{style:1===t.row.state?"color:#409eff":"color:#ea1b29"},[e._v(" "+e._s(e._f("state")(t.row.state))+" ")])]}}])}),n("el-table-column",{attrs:{prop:"contacts",label:"联系人","min-width":"80"}}),n("el-table-column",{attrs:{prop:"contactsNumber",label:"联系电话","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contactsNumber.split(/,|，/),(function(t){return n("div",{key:t},[e._v(e._s(t))])}))}}])}),n("el-table-column",{attrs:{prop:"email",label:"联系邮箱","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.email.split(/,|，/),(function(t){return n("div",{key:t},[e._v(e._s(t))])}))}}])}),n("el-table-column",{attrs:{label:"操作","min-width":"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",loading:t.row.loading},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"启用",placement:"top"}},[1!==t.row.state?n("el-button",{attrs:{size:"mini",loading:t.row.loading,icon:"el-icon-video-play"},on:{click:function(n){return e.handleChange(1,t.$index,t.row)}}}):e._e()],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停用",placement:"top"}},[1===t.row.state?n("el-button",{attrs:{size:"mini",loading:t.row.loading,icon:"el-icon-video-pause"},on:{click:function(n){return e.handleChange(2,t.$index,t.row)}}}):e._e()],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[2===t.row.state?n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",loading:t.row.loading,type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}}):e._e()],1)]}}])})],1),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],i=n("5530"),o=n("1da1"),r=(n("4de4"),n("d3b7"),n("d81d"),n("e9c4"),n("96cf"),n("a6b9")),s={filters:{state:function(e){var t="";return 0===e?t="未启用":1===e?t="正常":2===e&&(t="已停用"),t}},data:function(){return{supplierData:[],page:{pageNo:1,pageSize:20},total:0,testData:{supplierName:"",state:""},currentPage4:0}},created:function(){this.getSupplierMes()},methods:{handleChange:function(e,t,n){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){while(1)switch(l.prev=l.next){case 0:n.loading=!0,Object(r["b"])(n.supplierId,e).then((function(){n.loading=!1,a.supplierData[t].state=e})).catch((function(){n.loading=!1}));case 2:case"end":return l.stop()}}),l)})))()},getSupplierMes:function(){var e=this;Object(r["j"])(this.page,this.testData).then((function(t){console.log(t),e.total=t.total,e.supplierData=t.records.filter((function(e){return e})),e.supplierData.map((function(e){e.loading=!1}))}))},handleEdit:function(e,t){console.log(e,t),this.$router.push({path:"/supplier/supplierEdit/".concat(t.supplierId)}),localStorage.setItem("supplierInfo",JSON.stringify(t))},handleDelete:function(e,t){var n=this;t.loading=!0,this.$confirm("请确定是否删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(r["d"])(t.supplierId);case 2:n.supplierData[e].loading=!1,n.$message({type:"success",message:"操作成功"}),n.getSupplierMes();case 5:case"end":return a.stop()}}),a)})))).catch((function(){n.$message({type:"info",message:"取消删除"})}))},tableClick:function(e,t,n){console.log(t),localStorage.setItem("supplierInfo",JSON.stringify(e)),"操作"!==t.label&&"selection"!==t.type&&this.$router.push("/supplier/supplierInfo/".concat(e.supplierId))},cellStyle:function(e){var t={textAlign:"center"};return"selection"!==e.column.type&&"操作"!==e.column.label&&(t=Object(i["a"])(Object(i["a"])({},t),{},{cursor:"pointer"})),t},handleSizeChange:function(e){this.page.pageNo=1,this.page.pageSize=e,this.getSupplierMes()},handleCurrentChange:function(e){this.page.pageNo=e,this.getSupplierMes()}}},c=s,u=(n("e2d3"),n("2877")),p=Object(u["a"])(c,a,l,!1,null,"c94e5930",null);t["default"]=p.exports},"18a4":function(e,t,n){},e2d3:function(e,t,n){"use strict";n("18a4")}}]);